<li>
  <div class="task-content">
    <div class="task-header items">
      <span class="task-name">
        <fa-icon
          [ngClass]="{
            'front-icon': true,
            'completed-icon': task().completed,
            'not-completed-icon': !task().completed,
          }"
          [icon]="task().completed ? faCheck : faXmark"
        />
        {{task().title}}
      </span>

      <span class="task-actions">
        <button class="task-btn" (click)="toggleCompleted()">
          <fa-icon
            [ngClass]="{
              'small-icon': true,
              'completed-icon': !task().completed,
              'not-completed-icon': task().completed,
            }"
            [icon]="task().completed ? faXmark : faCheck"
          /> 
          {{task().completed ? 'Marcar "Não Feito"' : 'Marcar "Feito"'}}
        </button>
        <button class="task-btn" (click)="removeTask()">
          <fa-icon class="small-icon" [icon]="faTrash" />
          Remover
        </button>
      </span>
    </div>

    <div class="task-info items-divisor">
      <span class="task-due-date">Data de entrega: {{task().dueDate?.toLocaleDateString() ?? 'Não definida'}}</span>
      <span class="task-priority">Prioridade: {{priority()}}</span>
      <span class="task-priority">Feito: {{task().completed ? 'Sim' : 'Não'}}</span>
    </div>

    <p class="task-description">{{task().description}}</p>
  </div>

  @if (task().subtasks.length) {
    <ul class="subtask-list">
      @for (subtask of task().subtasks; track $index) {
        <app-subtask-item [task]="this.task()" [subtask]="subtask" />
      }
    </ul>
  }

  <div class="create-subtask-container">
    @if (isViewMode) {
      <button class="create-subtask-btn" (click)="goToSubtaskCreation()">Criar subtarefa</button>
    } @else {
      <app-create-subtask (subtaskCancelled)="goToViewMode()" (subtaskCreated)="createSubtask($event)" />
    }
  </div>
</li>
