<li>
  <div class="task-content">
    <div class="task-header">
      <span class="task-name">{{task().title}}</span>

      <span class="task-actions">
        <button (click)="toggleCompleted()">
          <fa-icon [icon]="task().completed ? faXmark : faCheck" /> 
          {{task().completed ? 'Marcar "Não Feito"' : 'Marcar "Feito"'}}
        </button>
        <button (click)="removeTask()">
          <fa-icon [icon]="faTrash" />
          Remover
        </button>
      </span>
    </div>

    <div class="task-info">
      <span class="task-due-date">Data de entrega: {{task().dueDate?.toLocaleDateString() ?? 'Não definida'}}</span>
      <span class="task-priority">Prioridade: {{priority()}}</span>
      <span class="task-priority">Feito: {{task().completed ? 'Sim' : 'Não'}}</span>
    </div>

    <p class="task-description">{{task().description}}</p>
  </div>

  <div class="subtasks">
    <ul>
      @for (subtask of task().subtasks; track $index) {
        <app-subtask-item [task]="this.task()" [subtask]="subtask" />
      }
    </ul>

    @if (isViewMode) {
      <button (click)="goToSubtaskCreation()">Criar subtarefa</button>
    } @else {
      <app-create-subtask (subtaskCancelled)="goToViewMode()" (subtaskCreated)="createSubtask($event)" />
    }
  </div>
</li>
